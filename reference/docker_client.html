<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Create docker client — docker_client • stevedore</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script>

<!-- sticky kit -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



<meta property="og:title" content="Create docker client — docker_client" />

<meta property="og:description" content="Create a docker client object, which allows you to interact with
docker from R.  The object has several methods that allow
interaction with the docker daemon (for this object they are all
&quot;system&quot; commands) and collections, which contains further
methods.  The client is structured similarly to the docker command
line client, such that docker container create &amp;lt;args&amp;gt; in
the command line becomes docker$container$create(...) in R
(if the client is called R)." />
<meta name="twitter:card" content="summary" />



<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">stevedore</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">0.9.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/stevedore.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/examples.html">Examples and use-cases</a>
    </li>
  </ul>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/richfitz/stevedore">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Create docker client</h1>
    <small class="dont-index">Source: <a href='https://github.com/richfitz/stevedore/blob/master/R/docker_client.R'><code>R/docker_client.R</code></a></small>
    <div class="hidden name"><code>docker_client.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p>Create a docker client object, which allows you to interact with
docker from R.  The object has several <em>methods</em> that allow
interaction with the docker daemon (for this object they are all
"system" commands) and <em>collections</em>, which contains further
methods.  The client is structured similarly to the docker command
line client, such that <code>docker container create &lt;args&gt;</code> in
the command line becomes <code>docker$container$create(...)</code> in R
(if the client is called R).</p>
    
    </div>

    <pre class="usage"><span class='fu'>docker_client</span>(<span class='no'>...</span>, <span class='kw'>api_version</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>host</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>cert_path</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>tls_verify</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>machine</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>http_client_type</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>data_frame</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>quiet</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>debug</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='kw'>ignore_environment</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>...</th>
      <td><p>Reserved for future use.  Passing in any unrecognised
argument will throw an error.  Part of the role of this argument
is to force use of named arguments until the API is stabilised.</p></td>
    </tr>
    <tr>
      <th>api_version</th>
      <td><p>Version of the API to use when communicating
with the docker daemon.  The default value, <code>NULL</code>, detects
the docker server API version and attempts to match it (this
mirrors the default behaviour of the docker command line
client).  Alternatively, provide an API version number as a
string or <code>numeric_version</code> object (supported
between 1.25
 and
1.39
).  The version
1.29
 is the version
used in most automated tests, and if problems are encountered,
consider forcing this version).</p></td>
    </tr>
    <tr>
      <th>host</th>
      <td><p>The URL for the docker daemon.  This can be a unix
socket (e.g., unix:///var/run/docker.sock) on macOS/Linux, a
named pipe (e.g., <code>npipe:////./pipe/docker_engine</code>) on
Windows, or an http or https url (e.g.,
<code>https://localhost:2376</code>).  If not given, we use the
environment variable <code>DOCKER_HOST</code>, falling back on the
default socket or named pipe (for macOS/unix and windows
respectively).</p></td>
    </tr>
    <tr>
      <th>cert_path</th>
      <td><p>The path to a directory containing certificate
files.  If using an <code>https</code> url this is required.  If not
given, we use the environment variable <code>DOCKER_CERT_PATH</code>.
This is ignored without warning if used with a socket or named
pipe connection.</p></td>
    </tr>
    <tr>
      <th>tls_verify</th>
      <td><p>Logical, indicating if TLS should be verified.
This is only used if using an https connection (i.e., host is a
tcp/http/https url and<code>cert_path</code> is given).  If not given,
we use the environment variable <code>DOCKER_TLS_VERIFY</code>.</p></td>
    </tr>
    <tr>
      <th>machine</th>
      <td><p>Scalar character (if provided) indicating the name
of a "docker machine" instance to use.  If this is provided then
<code>docker-machine</code> must be installed and the machine must
exist and be running.  <code>stevedore</code> will run
<code>docker-machine env machine</code> to determine the environment
variables to contact this machine and use these values for
<code>host</code>, <code>cert_path</code> and <code>tls_verify</code> (silently
ignoring any provided values).  Carl Boettiger is working on a
<a href='https://github.com/cboettig/dockermachine'>docker machine</a>
package for R that would make managing docker machines from R
easier.  As an alternative to this option, one can set
docker-machine environment variables as described in
<code>docker-machine env</code> before running R and they would be picked
up as described above.</p></td>
    </tr>
    <tr>
      <th>http_client_type</th>
      <td><p>HTTP client type to use.  The options are
(currently) "curl", which uses the <code>curl</code> package (works
over unix sockets and over TCP) and <code>httppipe</code> which works
over unix sockets and windows named pipes, using the Docker
SDK's pipe code via the <code>httppipe</code> package.  Not all
functionality is supported with the <code>httppipe</code> client.
This option may eventually be moved into the <code>...</code> argument
as is not intended for end-user use; it is primarily intended
for debugging in development (forcing the <code>httppipe</code> client
where the <code>curl</code> client would ordinarily be preferred).</p></td>
    </tr>
    <tr>
      <th>data_frame</th>
      <td><p>Function, used to wrap data.frames returned.
This may make output easier to consume.  You might use
<code><a href='http://www.rdocumentation.org/packages/tibble/topics/as_tibble'>tibble::as_tibble</a></code> to return a <code>tbl_df</code> or
<code>datatable::as.data.table</code> to return <code>data.table</code>
objects.  This will be applied to all data.frames <em>after</em>
they are constructed, and so must take a single argument (the
newly constructed data.frame) and return a new object that is
largely compatible with data.frame.  Another use for this would
be to define a function <code>data_frame = function(x)
structure(x, class = c("foo", "data.frame"))</code> to set the class
of all returned data.frame objects to be "foo" as well and then
defining a custom S3 print method for "foo" that limited the
output.</p></td>
    </tr>
    <tr>
      <th>quiet</th>
      <td><p>Suppress informational messages.</p></td>
    </tr>
    <tr>
      <th>debug</th>
      <td><p>Enable http debugging (supported by the curl http
driver only).  Provide a connection object and http headers and
content will be sent to it.  Using <code>debug = TRUE</code> is
equivalent to <code>code = stdout()</code>, while <code>debug = FALSE</code>
is equivalent to <code>debug = NULL</code> (the default) which
prevents debugging information being printed.  This option can
be used to write to a file by opening a writeable connection but
care must be made not to close this connection because otherwise
the curl requests may fail.</p></td>
    </tr>
    <tr>
      <th>ignore_environment</th>
      <td><p>Logical, indicating if environment
variables (<code>DOCKER_HOST</code>, <code>DOCKER_CERT_PATH</code>,
<code>DOCKER_TLS_VERIFY</code> and <code>DOCKER_API_VERSION</code>) should
be ignored (this has no effect if <code>machine</code> is specified).</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>(automatic help generation has failed)</p>
    
    <h2 class="hasAnchor" id="connection-options"><a class="anchor" href="#connection-options"></a>Connection options</h2>

    
    <p><code>stevedore</code> can connect to the docker daemon via a unix
socket (this is the default set-up on Linux and macOS), over a
named pipe (Windows 10 - see below) and https over a normal tcp
connection (this is especially useful with
<a href='https://docs.docker.com/machine/'><code>docker-machine</code></a>.</p>
<ol>
<li><p>If the <code>machine</code> argument is given then
  <code>stevedore</code> queries <code>docker-machine</code> for settings.  If
  that command fails (e.g., there is no machine,
  <code>docker-machine</code> not installed) then that will cause an
  error.  (Note that the <code>docker-machine</code> output does not
  include API version information so the <code>api_version</code>
  argument is relevant, but <code>host</code>, <code>cert_path</code> and
  <code>tls_verify</code> will be silently ignored if provided).</p></li>
<li><p>The arguments <code>host</code> overrides the environment variable
  <code>DOCKER_HOST</code>, <code>cert_path</code> overrides
  <code>DOCKER_CERT_PATH</code> and <code>tls_verify</code> overrides
  <code>DOCKER_TLS_VERIFY</code>.  If <code>ignore_environment</code> is
  <code>TRUE</code> then the environment variables are not used at all.</p></li>
<li><p>if <code>code</code> is not provided by any of the above methods
  (machine, argument or environment variable) it will fall back
  on the default unix socket (<code>var/run/docker.sock</code>) on
  Linux/macOS or the default windows named pipe
  (<code>npipe:////./pipe/docker_engine</code>) on windows.</p></li>
</ol>
    <p>The API version is set by the <code>api_version</code> argument, which
falls back on the environment variable <code>DOCKER_API_VERSION</code>
(this is the same as the docker command line client and the python
SDK).  If neither are provided then <code>stevedore</code> will detect
the API version being used by the daemon and match that (provided
it falls within the range of versions supported by the package).</p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='kw'>if</span> (<span class='kw pkg'>stevedore</span><span class='kw ns'>::</span><span class='fu'><a href='http://www.rdocumentation.org/packages/stevedore/topics/docker_available'>docker_available</a></span>()) {
  <span class='co'># Create a new client object:</span>
  <span class='no'>client</span> <span class='kw'>&lt;-</span> <span class='kw pkg'>stevedore</span><span class='kw ns'>::</span><span class='fu'><a href='http://www.rdocumentation.org/packages/stevedore/topics/docker_client'>docker_client</a></span>()

  <span class='co'># Version information for your docker daemon:</span>
  <span class='no'>client</span>$<span class='fu'>version</span>()

  <span class='co'># General information about your daemon:</span>
  <span class='no'>client</span>$<span class='fu'>info</span>()

  <span class='co'># Most of the interesting methods are within the collections.</span>
  <span class='co'># For example, to see a summary of running containers:</span>
  <span class='no'>client</span>$<span class='no'>container</span>$<span class='fu'>list</span>()

  <span class='co'># (see ?docker_container) for more information.</span>
}</div><div class='output co'>#&gt;  [1] id               names            image            image_id        
#&gt;  [5] command          created          ports            size_rw         
#&gt;  [9] size_root_fs     labels           state            status          
#&gt; [13] host_config      network_settings mounts           name            
#&gt; &lt;0 rows&gt; (or 0-length row.names)</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#details">Details</a></li>

      <li><a href="#connection-options">Connection options</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Rich FitzJohn.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  

  </body>
</html>

